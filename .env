# ============================================
# CẤU HÌNH MONGODB
# ============================================
# MongoDB local (mặc định)
MONGODB_URI=mongodb://localhost:27017/
MONGODB_DATABASE=lightrag_db


# ============================================
# CẤU HÌNH LLM PROVIDER
# ============================================
# Chọn provider: openai HOẶC groq
LLM_PROVIDER=groq

# model khuyến nghị:
# - llama-3.3-70b-versatile (TỐT NHẤT - mới nhất, khả năng cao nhất)
# - llama-3.1-8b-instant (NHANH NHẤT ))
LLM_MODEL=llama-3.3-70b-versatile

# Cho OpenAI (nếu dùng openai provider):
# LLM_MODEL=gpt-4o-mini

# ============================================
# API KEYS
# ============================================

OPENAI_API_KEY=openai-api-key
GROQ_API_KEY=


# ============================================
# CẤU HÌNH EMBEDDING
# ============================================
# Model embedding
EMBEDDING_MODEL=all-MiniLM-L6-v2

# Số chiều của vector embedding
EMBEDDING_DIM=384

USE_DOCLING=true

DOCLING_DEVICE=cpu
DOCLING_OCR=false


# ============================================
# TỐI ƯU HÓA HIỆU SUẤT
# ============================================
# Số lượng LLM calls song song cho trích xuất entity
MAX_CONCURRENT_LLM_CALLS=16

# Số chunks xử lý mỗi batch
EXTRACTION_BATCH_SIZE=20

# Số embeddings tạo mỗi batch
EMBEDDING_BATCH_SIZE=128


# ============================================
# EXTRACTION 
# ============================================
# Số lần thử extraction tiếp tục để tránh bỏ sót entities
# 0 = Tắt (nhanh nhất)
# 1 = Cân bằng (KHUYẾN NGHỊ cho production)
# 2 = Kỹ lưỡng (chậm hơn nhưng đầy đủ nhất)
MAX_GLEANING=1

# Dùng LLM để gộp mô tả entity (chất lượng tốt hơn)
# true = Dùng LLM summarization (KHUYẾN NGHỊ)
# false = Nối chuỗi đơn giản (nhanh hơn)
USE_LLM_ENTITY_MERGE=true

MIN_DESCRIPTIONS_FOR_LLM_MERGE=3

# Dùng LLM để gộp mô tả relationship (giống entities)
# true = Dùng LLM summarization (KHUYẾN NGHỊ)
# false = Nối chuỗi đơn giản (nhanh hơn)
USE_LLM_RELATIONSHIP_MERGE=true


# ============================================
# CẤU HÌNH CHUNKING
# ============================================
# Kích thước chunk mặc định (theo tokens)
DEFAULT_CHUNK_SIZE=300

# Độ overlap mặc định giữa các chunks
DEFAULT_CHUNK_OVERLAP=50


# ============================================
# CẤU HÌNH FAISS
# ============================================
# Dùng HNSW index (tìm kiếm nhanh hơn, tốn bộ nhớ hơn)
USE_HNSW=true


HNSW_M=32                      
HNSW_EF_CONSTRUCTION=200        
HNSW_EF_SEARCH=50             


# ============================================
# CẤU HÌNH LƯU TRỮ
# ============================================
# Kích thước file tối đa (MB)
MAX_FILE_SIZE_MB=50

# Tự động rebuild FAISS khi tỷ lệ xóa vượt quá ngưỡng này
AUTO_REBUILD_THRESHOLD=0.2

# Thư mục data (mặc định: backend/data)
DATA_DIR=backend/data
LOG_LEVEL=INFO